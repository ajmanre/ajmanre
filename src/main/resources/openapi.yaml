openapi: "3.0.2"
info:
  title: API Ajmanre
  version: "1.0"
servers:
  - url: http://localhost:{port}
    description: The production API server
    variables:
      port:
        enum:
          - '8443'
          - '443'
        default: '8443'
tags:
  - name: Ajmanre
    description: Ajmanre.
paths:
  /auth/signin:
    post:
      tags:
        - "signin"
      summary: "signin"
      description: "signin"
      operationId: "signin"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginRequest"
      responses:
        "200":
          description: "JWT response"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JwtResponse"
        "405":
          description: "Invalid input"
  /auth/signup:
    post:
      tags:
        - "signup"
      summary: "signup"
      description: "signup"
      operationId: "signup"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SignupRequest"
      responses:
        "200":
          description: "MessageResponse"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageResponse"
        "405":
          description: "Invalid input"
  /prop/type:
    post:
      tags:
        - "propType"
      summary: "property type"
      operationId: "propType"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PropertyTypeRequest"
      responses:
        "200":
          description: "MessageResponse"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageResponse"
        "405":
          description: "Invalid input"
  /prop/type/hierarchy:
    get:
      tags:
        - "propTypeHierarchy"
      summary: "property type hierarchy"
      operationId: "propTypeHierarchy"
      responses:
        "200":
          description: "property type hierarchy"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/PropertyTypeHierarchy"
        "405":
          description: "Invalid input"
  /area:
    post:
      tags:
        - "area"
      summary: "area locality"
      operationId: "areaPost"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AreaRequest"
      responses:
        "200":
          description: "MessageResponse"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageResponse"
  /area/all:
    get:
      tags:
        - "areaAll"
      summary: "areas in emirate"
      operationId: "areaAll"
      responses:
        "200":
          description: "property type hierarchy"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Area"
        "405":
          description: "Invalid input"
  /select:
    post:
      tags:
        - "select"
      summary: "select"
      operationId: "selectPost"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SelectRequest"
      responses:
        "200":
          description: "MessageResponse"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageResponse"
  /select/{list}:
    get:
      tags:
        - "selectList"
      summary: "selectList of values"
      operationId: "selectList"
      parameters:
        - in: path
          name : list
          schema:
            type: string
          required: true
          description: "select list type e.g. prop-status"
      responses:
        "200":
          description: "property type hierarchy"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Select"
  /agency:
    post:
      tags:
        - "agencyAdd"
      summary: "add agency"
      operationId: "agencyPost"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AgencyRequest"
      responses:
        "200":
          description: "MessageResponse"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageResponse"
  /agency/{page}/{size}:
    get:
      tags:
        - "agencyPageSize"
      summary: "agency listing"
      operationId: "agencyPageSize"
      parameters:
        - in: path
          name : page
          schema:
            type: integer
            default: 1
          required: true
          description: "page no of the list pagination"
        - in: path
          name : size
          schema:
            type: integer
            default: 5
          required: true
          description: "size of the pagination"
      responses:
        "200":
          description: "agency pagination listing"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AgencyPage"
  /agency/{agencyId}:
    get:
      tags:
        - "agencyId"
      summary: "agency get"
      operationId: "agencyId"
      parameters:
        - in: path
          name : agencyId
          schema:
            type: string
          required: true
          description: "agency details by id"
      responses:
        "200":
          description: "agency pagination listing"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Agency"
  /agency/{id}:
    put:
      tags:
        - "agencyEdit"
      summary: "edit agency"
      operationId: "agencyPut"
      parameters:
        - in: path
          name : id
          schema:
            type: string
          required: true
          description: "update agency details by id"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Agency"
      responses:
        "200":
          description: "MessageResponse"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageResponse"
  /agent:
    post:
      tags:
        - "agentAdd"
      summary: "add agent"
      operationId: "agentPost"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AgentRequest"
      responses:
        "200":
          description: "MessageResponse"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageResponse"
  /agent/{page}/{size}:
    get:
      tags:
        - "agentPageSize"
      summary: "agent listing"
      operationId: "agentPageSize"
      parameters:
        - in: path
          name : page
          schema:
            type: integer
            default: 1
          required: true
          description: "page no of the list pagination"
        - in: path
          name : size
          schema:
            type: integer
            default: 5
          required: true
          description: "size of the pagination"
      responses:
        "200":
          description: "agency pagination listing"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AgentPage"
  /agent/{agentId}:
    get:
      tags:
        - "agentId"
      summary: "agent get"
      operationId: "agentId"
      parameters:
        - in: path
          name : agentId
          schema:
            type: string
          required: true
          description: "agent details by id"
      responses:
        "200":
          description: "agent pagination listing"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Agent"
  /agent/{id}:
    put:
      tags:
        - "agentEdit"
      summary: "edit agent"
      operationId: "agentPut"
      parameters:
        - in: path
          name : id
          schema:
            type: string
          required: true
          description: "update agent details by id"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Agent"
      responses:
        "200":
          description: "MessageResponse"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageResponse"
  /property:
    post:
      tags:
        - "propertyAdd"
      summary: "add property"
      operationId: "propertyPost"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Property"
      responses:
        "200":
          description: "MessageResponse"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageResponse"
  /property/retrieve:
    get:
      tags:
        - "propertyRetrieve"
      summary: "property retrieve"
      operationId: "propertyRetrieve"
      responses:
        "200":
          description: "agency pagination listing"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Property"
  /property/{propertyId}:
    get:
      tags:
        - "propertyId"
      summary: "property get"
      operationId: "propertyId"
      parameters:
        - in: path
          name : propertyId
          schema:
            type: string
          required: true
          description: "property details by id"
      responses:
        "200":
          description: "agent pagination listing"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/property"
  /property/{id}:
    put:
      tags:
        - "propertyEdit"
      summary: "edit property"
      operationId: "propertyPut"
      parameters:
        - in: path
          name : id
          schema:
            type: string
          required: true
          description: "update property details by id"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Property"
      responses:
        "200":
          description: "MessageResponse"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageResponse"
        "400":
          description: "Bad input"
components:
  schemas:
    LoginRequest:
      type: "object"
      required:
        - username
        - password
      properties:
        username:
          type: "string"
          description: "Username"
        password:
          type: "string"
          description: "Password"
    JwtResponse:
      type: "object"
      properties:
        accessToken:
          type: "string"
          description: "token"
        type:
          type: "string"
          description: "type"
        id:
          type: "string"
          description: "id"
        username:
          type: "string"
          description: "Username"
        email:
          type: "string"
          description: "email"
        roles:
          type: "array"
          description: "roles"
          items:
            type: string
          example: ['admin', 'agent', 'user']
    SignupRequest:
      type: "object"
      required:
        - username
        - password
        - email
      properties:
        username:
          type: "string"
          description: "Username"
        password:
          type: "string"
          description: "Password"
        email:
          type: "string"
          description: "email"
        roles:
          type: "array"
          description: "roles"
          items:
            type: string
          example: ['admin', 'agent', 'user']
    MessageResponse:
      type: "object"
      required:
        - message
      properties:
        message:
          type: "string"
          description: "Message"
        identifier:
          type: "string"
          description: "If identifier has to be in response"
    PropertyTypeRequest:
      type: "object"
      required:
        - type
        - order
      properties:
        id:
          type: "string"
          description: "hierarchy id"
        type:
          type: "string"
          description: "type of the property"
        order:
          type: "integer"
          description: "order list on this value"
        child:
          $ref: "#/components/schemas/PropertyTypeChild"
    PropertyTypeChild:
      type: "object"
      required:
        - type
        - order
      properties:
        type:
          type: "string"
          description: "type of the property"
        order:
          type: "integer"
          description: "order list on this value"
        child:
          $ref: "#/components/schemas/PropertyTypeChild"
    PropertyType:
      type: "object"
      required:
        - id
        - enable
        - type
        - order
      properties:
        id:
          type: "string"
        enable:
          type: "boolean"
        type:
          type: "string"
          description: "type of the property"
        order:
          type: "integer"
          description: "order list on this value"
        child:
          $ref: "#/components/schemas/PropertyTypeChild"
    PropertyTypeHierarchy:
      type: "object"
      required:
        - type
        - order
      properties:
        id:
          type: "string"
          description: "id of hierarchy"
        type:
          type: "string"
          description: "type of the property"
        order:
          type: "integer"
          description: "order list on this value"
        children:
          type: "array"
          description: "property type hierarchy"
          items:
            $ref: "#/components/schemas/PropertyTypeItem"
    PropertyTypeItem:
      type: "object"
      required:
        - type
        - order
      properties:
        type:
          type: "string"
          description: "type of the property"
        order:
          type: "integer"
          description: "order list on this value"
        children:
          type: "array"
          description: "property type hierarchy"
          items:
            $ref: "#/components/schemas/PropertyTypeItem"
    AreaRequest:
      type: "object"
      required:
        - name
        - emirate
        - country
      properties:
        name:
          type: "string"
          description: "area in emirate"
        locality:
          type: "string"
          description: "location"
        emirate:
          type: "string"
          description: "emirate of UAE"
        country:
          type: "string"
          description: "UAE country"
    Area:
      type: "object"
      required:
        - id
        - name
        - emirate
        - country
      properties:
        id:
          type: "string"
          description: "id of area"
        name:
          type: "string"
          description: "area in emirate"
        locality:
          type: "string"
          description: "location"
        emirate:
          type: "string"
          description: "emirate of UAE"
        country:
          type: "string"
          description: "UAE country"
    SelectRequest:
      type: "object"
      required:
        - key
        - value
        - order
        - type
      properties:
        key:
          type: "string"
        value:
          type: "string"
        order:
          type: "integer"
          description: "sorting order"
        type:
          type: "string"
          description: "type for the list e.g. prop-status"
    Select:
      type: "object"
      required:
        - id
        - key
        - value
        - order
        - type
      properties:
        id:
          type: "string"
        key:
          type: "string"
        value:
          type: "string"
        order:
          type: "integer"
          description: "sorting order"
        type:
          type: "string"
          description: "type for the list e.g. prop-status"
    AgencyRequest:
      type: "object"
      required:
        - name
      properties:
        name:
          type: "string"
        tel:
          type: "string"
        facebook:
          type: "string"
          description: "facebook page"
        insta:
          type: "string"
          description: "instagram profile id"
        adresses:
          type: "array"
          description: "addresses of agency"
          items:
            $ref: "#/components/schemas/Address"
        contacts:
          type: "array"
          description: "contacts of agency"
          items:
            $ref: "#/components/schemas/Contact"
    Address:
      type: "object"
      required:
        - adressLine1
        - city
      properties:
        adressLine1:
          type: "string"
        adressLine2:
          type: "string"
        area:
          type: "string"
        city:
          type: "string"
        country:
          type: "string"
    Contact:
      type: "object"
      required:
        - name
      properties:
        name:
          type: "string"
        tel:
          type: "string"
        mobile:
          type: "string"
        email:
          type: "string"
    Agency:
      type: "object"
      required:
        - id
        - name
      properties:
        id:
          type: "string"
        updatedAt:
          type: "string"
          format: "date-time"
        name:
          type: "string"
        tel:
          type: "string"
        facebook:
          type: "string"
          description: "facebook page"
        insta:
          type: "string"
          description: "instagram profile id"
        adresses:
          type: "array"
          description: "addresses of agency"
          items:
            $ref: "#/components/schemas/Address"
        contacts:
          type: "array"
          description: "contacts of agency"
          items:
            $ref: "#/components/schemas/Contact"
    AgencyPage:
      type: "object"
      required:
        - page
        - page
        - total
      properties:
        page:
          type: integer
          description: page no of data result in pagination
        size:
          type: integer
          description: no of data elements in page
        data:
          type: array
          items:
            $ref: "#/components/schemas/Agency"
          description: data elements list in page
        total:
          type: integer
          description: total elements in the list
    AgentRequest:
      type: "object"
      required:
        - name
      properties:
        name:
          type: "string"
        serviceAreas:
          type: "string"
        specialties:
          type: "string"
          description: "agent specialties"
        position:
          type: "string"
          description: "agent position"
        license:
          type: "string"
          description: "agent position"
        imageFile:
          type: "string"
          description: "uploaded file url"
        address:
          $ref: "#/components/schemas/Address"
        contact:
          $ref: "#/components/schemas/Contact"
        agency:
          $ref: "#/components/schemas/Source"
    Agent:
      type: "object"
      required:
        - id
        - name
      properties:
        id:
          type: "string"
        updatedAt:
          type: "string"
          format: "date-time"
        name:
          type: "string"
        serviceAreas:
          type: "string"
        specialties:
          type: "string"
          description: "agent specialties"
        position:
          type: "string"
          description: "agent position"
        license:
          type: "string"
          description: "agent position"
        imageFile:
          type: "string"
          description: "uploaded file url"
        address:
          $ref: "#/components/schemas/Address"
        contact:
          $ref: "#/components/schemas/Contact"
        agency:
          $ref: "#/components/schemas/Source"
    AgentPage:
      type: "object"
      required:
        - page
        - size
        - total
      properties:
        page:
          type: integer
          description: page no of data result in pagination
        size:
          type: integer
          description: no of data elements in page
        data:
          type: array
          items:
            $ref: "#/components/schemas/Agent"
          description: data elements list in page
        total:
          type: integer
          description: total elements in the list
    Source:
      type: "object"
      required:
        - id
        - name
      properties:
        id:
          type: string
          description: source identifier
        name:
          type: string
          description: key value of the  source
    Property:
      type: "object"
      required:
        - id
        - identifier
        - summary
      properties:
        id:
          type: string
          description: source identifier
        identifier:
          type: string
          description: unique identifer
        summary:
          type: string
          description: propery summary
        updatedAt:
          type: "string"
          format: "date-time"
        status:
          type: string
        statusId:
          type: string
        type:
          type: string
        typeId:
          type: string
        subType:
          type: string
        location:
          type: string
        locationId:
          type: string
        bedroom:
          type: integer
        sqFt:
          type: number
          format: double
        sqMt:
          type: number
          format: double
        features:
          type: array
          items:
            type: string
        tags:
          type: array
          items:
            type: string
        project:
          $ref: "#/components/schemas/Project"
        assocWith:
          $ref: "#/components/schemas/Source"
        managedBy:
          $ref: "#/components/schemas/Source"
    Project:
      type: "object"
      required:
        - name
      properties:
        name:
          type: string
          description: name of the project
        overview:
          type: string
          description: project short overview